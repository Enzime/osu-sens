(this["webpackJsonptablet-area"]=this["webpackJsonptablet-area"]||[]).push([[0],{13:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),i=a(4),o=a.n(i),l=(a(13),a(2)),s=a(3),u=a(6);function h(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function m(e){var t=e.size,a=e.setScalingFactor,i=e.padding,o=void 0===i?{horizontal:0,vertical:0}:i,s=e.style,u=void 0===s?{border:"1px solid"}:s,m=function(){var e=Object(r.useState)(h()),t=Object(n.a)(e,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){function e(){c(h())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}(),d=t.width/(m.width-o.horizontal),b=t.height/(m.height-o.vertical),f=Math.max(1,d,b),p={width:Math.round(t.width/f),height:Math.round(t.height/f)};return Object(r.useEffect)((function(){a(f)}),[f,a]),c.a.createElement("div",{style:Object(l.a)({},u,{},p)},e.children)}function d(e){var t=Object(r.useState)(e.data),a=Object(n.a)(t,2),i=a[0],o=a[1];Object(r.useEffect)((function(){return o(e.data)}),[e.data]);var u=[];function h(t){o(Object(l.a)({},i,Object(s.a)({},t.target.name,Number(t.target.value)))),t.target.checkValidity()&&e.setter(Object(l.a)({},e.data,Object(s.a)({},t.target.name,Number(t.target.value))))}for(var m in e.data)"ignore"!==e.schema[m]&&u.push(c.a.createElement("label",{key:m},e.schema[m].label||m,": ",c.a.createElement("input",{type:"number",name:m,value:i[m],min:e.schema[m].min,max:e.schema[m].max,step:e.schema[m].step,disabled:e.schema[m].disabled,onChange:h})));return c.a.createElement("form",null,u)}function b(e){var t=e.style,a=void 0===t?{border:"1px solid"}:t;var n=e.size,r={width:"".concat(100*n.w,"%"),height:"".concat(100*n.h,"%")};return c.a.createElement(u.a,{onDrag:function(t,a){var n=a.x,r=a.y;e.handleDrag({x:n,y:r})},onDragStop:e.onDragStop,onResize:function(t,a,n,r,c){var i=c.x,o=c.y,l=n.style,s=l.width,u=l.height;e.handleResize({x:i,y:o,w:Number(s.slice(0,-1))/100,h:Number(u.slice(0,-1))/100})},onResizeStop:e.onResizeStop,bounds:e.bounds,default:{x:0,y:0,width:"50%",height:"50%"},size:r,position:e.position,style:a},e.children)}function f(e){var t="";for(var a in e)t+="".concat(a,": ").concat(e[a]," ");return c.a.createElement("div",null,t)}function p(e){var t=e.screen,a=e.subscreen,i=e.setSubscreen,o=(e.subscreenImage,e.setSubscreenImage),s=Object(r.useState)(1),u=Object(n.a)(s,2),h=u[0],d=u[1];function f(){var e=new Image;e.crossOrigin="anonymous",e.src=t.image;var n=document.createElement("canvas");n.width=a.w,n.height=a.h;var r=n.getContext("2d");e.onload=function(){r.drawImage(e,a.x,a.y,a.w,a.h,0,0,a.w,a.h),n.toBlob((function(e){o(URL.createObjectURL(e))}))}}Object(r.useEffect)(f,[t.image]);var p={x:Math.round(a.x/h),y:Math.round(a.y/h)},w={w:a.w/t.w,h:a.h/t.h};function v(e,t){return{x:Math.round(e*h),y:Math.round(t*h)}}return c.a.createElement(m,{size:{width:t.w,height:t.h},padding:{vertical:0,horizontal:20},style:{position:"relative",marginLeft:"10px",backgroundImage:"url(".concat(t.image,")"),backgroundSize:"100% 100%"},setScalingFactor:d},c.a.createElement(b,{bounds:"parent",onDragStop:f,onResizeStop:f,position:p,size:w,handleDrag:function(e){var t=e.x,n=e.y;i(Object(l.a)({},a,{},v(t,n)))},handleResize:function(e){var a=e.x,n=e.y,r=e.w,c=e.h;i(Object(l.a)({},v(a,n),{w:Math.round(r*t.w),h:Math.round(c*t.h)}))}}))}function w(e){var t=e.subscreenImage,a=e.tablet,i=e.projection,o=e.setProjection,s=Object(r.useState)(1),u=Object(n.a)(s,2),h=u[0],d=u[1];function f(e,t){return{x:Math.round(e*h),y:Math.round(t*h)}}var p={x:Math.round(i.x/h)+1,y:Math.round(i.y/h)+1},w={w:i.w/a.w,h:i.h/a.h};return c.a.createElement(m,{size:{width:a.w,height:a.h},padding:{vertical:0,horizontal:20},style:{border:"1px solid",position:"relative",marginLeft:"10px"},setScalingFactor:d},c.a.createElement(b,{size:w,position:p,handleDrag:function(e){var t=e.x,a=e.y;o(Object(l.a)({},i,{},f(t+1,a+1)))},handleResize:function(e){var t=e.x,n=e.y,r=e.w,c=e.h;o(Object(l.a)({},f(t-1,n-1),{w:Math.round(r*a.w),h:Math.round(c*a.h)}))},style:{backgroundImage:"url(".concat(t,")"),backgroundSize:"100% 100%"}}))}function v(e){var t=e.matrix,a=Object(r.useState)('xinput set-prop "Wacom One by Wacom S Pen" "Coordinate Transformation Matrix" '),i=Object(n.a)(a,2),o=i[0],l=i[1];var s="".concat(t.scaleX," 0 ").concat(t.offsetX," 0 ").concat(t.scaleY," ").concat(t.offsetY," 0 0 1");return c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){navigator.clipboard.writeText("".concat(o).concat(s)),alert("Copied command to clipboard")}},c.a.createElement("span",{role:"img","aria-label":"Copy to Clipboard"},"\ud83d\udccb")),c.a.createElement("pre",null,c.a.createElement("span",{contentEditable:!0,suppressContentEditableWarning:!0,spellCheck:!1,onBlur:function(e){l(e.target.innerText)},onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}},o),s))}function g(e){var t=e.matrix,a=e.updateProjection,i=Object(r.useState)({scaleX:1,scaleY:1,offsetX:0,offsetY:0}),o=Object(n.a)(i,2),u=o[0],h=o[1],m=Object(r.useState)(!1),d=Object(n.a)(m,2),b=d[0],f=d[1];Object(r.useEffect)((function(){b?h(t):f(!0)}),[t]);var p=[];function w(e){f(!1);var n=Object(l.a)({},t,Object(s.a)({},e.target.name,e.target.value));if(h(n),e.target.reportValidity()){var r=Object(l.a)({},t);for(var c in n)n[c]&&!isNaN(n[c])&&(!c.startsWith("scale")||c.startsWith("scale")&&0!==Number(n[c]))&&(r[c]=n[c]);a(r)}}for(var v in t)p.push(c.a.createElement("span",{key:v},c.a.createElement("label",{htmlFor:v},v,": "),c.a.createElement("input",{type:"text",name:v,id:v,value:u[v],onChange:w,pattern:v.startsWith("scale")?"(0\\.\\d*[1-9]|[1-9]\\d*(\\.\\d+)?)":"-?[0-9]*\\.?[0-9]+",required:!0})));return c.a.createElement("form",null,p)}function j(e){var t=e.sensitivity,a=e.updateProjection,i=Object(r.useState)({x:0,y:0}),o=Object(n.a)(i,2),u=o[0],h=o[1],m=Object(r.useState)(!1),d=Object(n.a)(m,2),b=d[0],f=d[1];Object(r.useEffect)((function(){b?h(t):f(!0)}),[t]);var p=[];function w(e){f(!1);var n=Object(l.a)({},t,Object(s.a)({},e.target.name,e.target.value));if(h(n),e.target.reportValidity()){var r=Object(l.a)({},t);for(var c in n)r[c]=Number(n[c]);a(r)}}for(var v in t)p.push(c.a.createElement("span",{key:v},c.a.createElement("label",{htmlFor:v},"sens",v.toUpperCase(),": "),c.a.createElement("input",{type:"text",name:v,id:v,value:0===u[v]?"undefined":u[v],onChange:w,pattern:"0\\.\\d*[1-9]|[1-9]\\d*(\\.\\d+)?",required:!0,disabled:0===t[v]})));return c.a.createElement("form",null,p)}function y(e){var t=e.screen,a=e.subscreen,i=e.tablet,o=e.projection,s=e.setProjection,u=Object(r.useState)({scaleX:1,scaleY:1,offsetX:0,offsetY:0}),h=Object(n.a)(u,2),m=h[0],d=h[1],b=Object(r.useState)({x:0,y:0}),p=Object(n.a)(b,2),w=p[0],y=p[1];Object(r.useEffect)((function(){var e=a.w/t.w*i.w/o.w,n=a.h/t.h*i.h/o.h,r=-o.x/i.w*e+a.x/t.w,c=-o.y/i.h*n+a.y/t.h;d({scaleX:e,scaleY:n,offsetX:r,offsetY:c});var l=function(e){var t=e.x,a=e.y,n=e.w,r=e.h;if(1366===n&&768===r)return{x:t+273,y:a+89,w:820,h:615}}(a);if(l){var s=512/l.w,u=384/l.h,h=a.w/o.w,m=a.h/o.h,b=i.w/i.pw,f=i.h/i.ph;y({x:s*h*b,y:u*m*f})}else y({x:0,y:0})}),[t,a,i,o]);var E=i.pw/i.w,O=i.ph/i.h,x=E*o.w,S=O*o.h;return c.a.createElement("div",null,c.a.createElement(g,{matrix:m,updateProjection:function(e){s({x:Math.round(i.w/e.scaleX*(a.x/t.w-e.offsetX)),y:Math.round(i.h/e.scaleY*(a.y/t.h-e.offsetY)),w:Math.round(a.w/t.w*i.w/e.scaleX),h:Math.round(a.h/t.h*i.h/e.scaleY)})}}),c.a.createElement(f,{mmX:x,mmY:S}),c.a.createElement(j,{sensitivity:w,updateProjection:function(e){s(Object(l.a)({},o,{w:Math.round(o.w*w.x/e.x),h:Math.round(w.y*o.h/e.y)}))}}),c.a.createElement(v,{matrix:m}))}var E={"CTL-472":{name:"One by Wacom (CTL-472)",data:{w:15200,h:9500,pw:152,ph:95}},"Huion-420":{name:"Huion 420/osu!tablet",data:{w:8340,h:4680,pw:105.918,ph:56.642}}};function O(e){var t=e.tablet,a=e.setTablet,i=e.projection,o=e.setProjection,l=Object(r.useState)("CTL-472"),s=Object(n.a)(l,2),u=s[0],h=s[1];var m=[];for(var b in E)m.push(c.a.createElement("option",{key:b,value:b},E[b].name));return c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"tablet-select"},"Select your tablet: "),c.a.createElement("select",{name:"tablet",id:"tablet-select",onChange:function(e){var n=e.target.selectedOptions[0].value;if(h(n),"custom"!==n){var r=E[n].data,c=r.w/t.w,l=r.h/t.h;a(r),o({x:Math.round(i.x*c),y:Math.round(i.y*l),w:Math.round(i.w*c),h:Math.round(i.h*l)})}}},m,c.a.createElement("option",{value:"custom"},"Custom")),c.a.createElement(d,{data:t,schema:{w:{min:1,label:"width",disabled:"custom"!==u},h:{min:1,label:"height",disabled:"custom"!==u},pw:{min:1,step:"any",label:"physical width (mm)",disabled:"custom"!==u},ph:{min:1,step:"any",label:"physical height (mm)",disabled:"custom"!==u}},setter:a}))}function x(e){var t=e.setImage;return c.a.createElement("form",null,c.a.createElement("div",null,"upload desktop screenshot"),c.a.createElement("input",{type:"file",onChange:function(e){var a=window.URL.createObjectURL(e.target.files[0]),n=new Image;n.src=a,n.onload=function(){t({image:a,w:n.width,h:n.height})}}}))}o.a.render(c.a.createElement((function(){var e=Object(r.useState)({image:"http://192.168.0.3:8080/Pictures/Screenshots.phi/19-12-19_23-11-03.png",w:3840,h:1080}),t=Object(n.a)(e,2),a=t[0],i=t[1],o=Object(r.useState)({x:2197,y:165,w:1366,h:768}),l=Object(n.a)(o,2),s=l[0],u=l[1],h=Object(r.useState)(),m=Object(n.a)(h,2),b=m[0],f=m[1],v=Object(r.useState)({w:15200,h:9500,pw:152,ph:95}),g=Object(n.a)(v,2),j=g[0],E=g[1],S=Object(r.useState)({x:0,y:0,w:15200,h:9500}),M=Object(n.a)(S,2),z=M[0],C=M[1];return c.a.createElement("div",{className:"App"},c.a.createElement("details",null,c.a.createElement("summary",null,"ScreenshotSelector"),c.a.createElement(x,{setImage:i}),c.a.createElement(d,{data:a,schema:{image:"ignore",w:{min:1,label:"width"},h:{min:1,label:"height"}},setter:i})),c.a.createElement("hr",null),c.a.createElement("details",null,c.a.createElement("summary",null,"DesktopDisplay"),c.a.createElement(p,{screen:a,subscreen:s,setSubscreen:u,subscreenImage:b,setSubscreenImage:f}),c.a.createElement(d,{data:s,schema:{x:{min:0,max:a.w},y:{min:0,max:a.h},w:{min:1,max:a.w,label:"width"},h:{min:1,max:a.h,label:"height"}},setter:u})),c.a.createElement("hr",null),c.a.createElement("details",{open:!0},c.a.createElement("summary",null,"TabletDisplay"),c.a.createElement(O,{tablet:j,setTablet:E,projection:z,setProjection:C}),c.a.createElement(w,{subscreenImage:b,tablet:j,projection:z,setProjection:C}),c.a.createElement(d,{data:z,schema:{x:{max:j.w},y:{max:j.h},w:{min:1,label:"width"},h:{min:1,label:"height"}},setter:C})),c.a.createElement("hr",null),c.a.createElement("details",{open:!0},c.a.createElement("summary",null,"TabletMath"),c.a.createElement(y,{screen:a,subscreen:s,tablet:j,projection:z,setProjection:C})))}),null),document.getElementById("root"))},8:function(e,t,a){e.exports=a(17)}},[[8,1,2]]]);
//# sourceMappingURL=main.3ad83b4e.chunk.js.map